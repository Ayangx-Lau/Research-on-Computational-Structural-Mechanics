! 定义模型的基本参数
CLEAR
/FILNAME, "2D_Lattice", 1
/PREP7

! 创建正方形并去除三角形区域
! 正方形尺寸为50x50，坐标原点为左下角
BLC4, 0, 0, 50, 50

! 去除左上角的三角形区域，顶点坐标为(0,5),(0,45),(40,45)
! 使用区域移除命令，创建三角形并将其移除
BLANK, 0, 5, 0, 45, 40, 45

! 定义右下角的三角形区域，镜像关于y=x轴
! 在此创建三角形并进行相应移除
BLANK, 0, 5, 50, 45, 40, 45

! 定义材料属性
MP, EX, 1, 2e8   ! 弹性模量
MP, PRXY, 1, 0.3 ! 泊松比

! 定义塑性行为 - 多线性强化模型
TB, PLASTIC, 1, 3, 1   ! 多线性塑性模型，参数设置
TBD, 1, 0.0, 4e5      ! 初始塑性应变为0时，应力为4e5
TBD, 2, 0.01, 5e5     ! 当塑性应变为0.01时，应力为5e5
TBD, 3, 10.01, 20.5e6 ! 当塑性应变为10.01时，应力为20.5e6

! 创建网格单元类型为PLANE183，平面应变
ET, 1, PLANE183
KEYOPT, 1, 3, 0   ! 平面应变模型

! 智能化网格划分，等级为2
LESIZE, ALL, 2  ! 生成2级网格
LMESH, ALL      ! 进行网格划分

! 镜像操作生成100x100结构模型
! 先在x方向镜像
/EDGE, X, 50
/IMGMIRROR, 1, ALL

! 然后在y方向镜像
/EDGE, Y, 50
/IMGMIRROR, 1, ALL

! 合并和压缩网格实体编号
ALLSEL, ALL
VSEL, ALL
CMSEL, S, ALL
CM, 'ALL', 'ALL'

! 定义求解器模块
/SOLU
ANTYPE, 0   ! 静力分析
SOLVE

! 设置位移边界条件
! 上、下侧所有节点在y方向固定
D, 1, ALL, 0   ! 下边界节点y方向固定
D, 2, ALL, 0   ! 上边界节点y方向固定

! 左、右两侧节点进行拉伸，施加总位移为1，进行100个时间步的计算
NSEL, S, LOC, X, 0   ! 选择左侧节点
D, ALL, UX, 0       ! 左侧节点x方向位移为0
D, ALL, UX, 0.01    ! 每次增量0.01

NSEL, S, LOC, X, 50  ! 选择右侧节点
D, ALL, UX, 1.0     ! 右侧节点施加总位移1.0

! 求解分析
SOLVE

! 求解结束，退出求解器
FINISH
