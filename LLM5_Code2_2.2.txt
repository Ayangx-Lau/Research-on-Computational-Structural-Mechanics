/prep7  
!***************************************
! 几何建模
!***************************************
! 创建基体正方形
BLC4,0,0,50,50               

! 创建左上三角形
K,100,0,5                     ! 关键点1
K,101,0,45                    ! 关键点2
K,102,40,45                   ! 关键点3
A,100,101,102                 ! 创建三角形面
ASBA,1,2                      ! 布尔减操作

! 创建右下对称三角形
K,200,5,0                     ! 镜像关键点1
K,201,45,0                    ! 镜像关键点2
K,202,45,40                   ! 镜像关键点3
A,200,201,202                 ! 创建镜像三角形面
ASBA,4,3                      ! 布尔减操作

!***************************************
! 材料定义
!***************************************
MP,EX,1,2e8                   ! 弹性模量
MP,PRXY,1,0.3                 ! 泊松比

! 定义多线性等向强化模型
TB,MISO,1,,3                  ! 定义3个数据点
TBTEMP,0                      ! 温度参数
TBPT,,0,4e5                   ! 初始屈服点
TBPT,,0.01,5e5                ! 塑性应变0.01对应应力
TBPT,,10.01,20.5e6            ! 塑性应变10.01对应应力

!***************************************
! 网格划分
!***************************************
ET,1,PLANE183                 ! 单元类型
KEYOPT,1,3,1                  ! 平面应变选项
SMRT,2                        ! 智能划分等级2
AMESH,all                     ! 划分所有面

!***************************************
! 镜像操作生成点阵
!***************************************
ARSYM,X,ALL                   ! X方向镜像
ARSYM,Y,ALL                   ! Y方向镜像
NUMMRG,ALL                    ! 合并重复实体
NUMCMP,ALL                    ! 压缩编号

!***************************************
! 求解设置
!***************************************
/SOLU
ANTYPE,static                 ! 静力分析
NLGEOM,ON                     ! 打开大变形

! 边界条件: 固定上下边缘Y方向
NSEL,S,LOC,Y,50               ! 选择上边缘
NSEL,A,LOC,Y,-50              ! 选择下边缘
D,ALL,UY,0                    ! 固定Y方向
ALLSEL                        ! 全选

! 位移加载: 左右边缘拉伸
NSEL,S,LOC,X,-50              ! 选择左边缘
D,ALL,UX,0                    ! 固定左边缘X方向
NSEL,S,LOC,X,50               ! 选择右边缘

! 载荷步设置
TIME,1                        ! 总时间设为1
NSUBST,100                    ! 100个子步
KBC,0                         ! 渐变加载
OUTRES,ALL,ALL                ! 输出所有结果
D,ALL,UX,1                    ! 施加右边缘位移
SOLVE                         ! 开始求解

FINISH                        ! 退出求解器