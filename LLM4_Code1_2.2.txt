! 建立模型，定义几何体、材料和网格划分

/FILNAME, Lattice_Structure, 1
/PREP7

! 创建正方形区域，边长50，左下角坐标为原点
BLC4, 0, 50, 0, 50

! 减去左上角的三角形区域，顶点为(0,5),(0,45),(40,45)
! 创建三角形
K, 1, 0, 5
K, 2, 0, 45
K, 3, 40, 45
K, 4, 0, 5
L, 1, 2
L, 2, 3
L, 3, 4

! 使用减去的三角形区域
V, 1, 2, 3, 4

! 对称线y=x上的三角形区域
! 创建右下区域的三角形，并通过y=x对称线镜像
K, 5, 50, 5
K, 6, 50, 45
K, 7, 10, 45
K, 8, 50, 5
L, 5, 6
L, 6, 7
L, 7, 8
V, 5, 6, 7, 8

! 对称线y=x，进行镜像操作
VY, 50, 50, 1

! 定义材料属性，弹性模量和泊松比
MP, EX, 1, 2e8    ! 弹性模量
MP, PRXY, 1, 0.3  ! 泊松比

! 定义材料的塑性行为
TB, PLASTIC, 1, 3
TBDATA, 4e5, 0.01, 5e5, 0.01, 20.5e6

! 设置网格单元类型和网格划分
ET, 1, PLANE183       ! 选择PLANE183单元类型
KEYOPT, 1, 3, 2       ! 设置平面应变
LESIZE, 2             ! 设置网格等级为2

! 使用智能网格划分方法
MESHALL

! 镜像两次以组成100*100的点阵结构模型
/REFLECT, 1, , Y, 50
/REFLECT, 1, , X, 50

! 合并网格实体编号
ALLSEL
CM, G, NODE
NSORT
NUMMRG, NODE

! 进入求解器模块

/SOLU
ANTYPE, STATIC        ! 选择静力分析
OUTRES, ALL           ! 输出所有结果

! 设置边界条件
! 固定上下两侧节点
D, LOC, 1, ALL, 0      ! 固定左侧节点
D, LOC, 2, ALL, 0      ! 固定右侧节点

! 对两侧节点施加位移增量
DK, 1, 1, 0.01         ! 左侧位移增量
DK, 2, 1, 1             ! 右侧总位移为1，100步进行拉伸

! 设置时间步长
TIME, 100

! 求解
SOLVE

! 结束求解过程
FINISH
