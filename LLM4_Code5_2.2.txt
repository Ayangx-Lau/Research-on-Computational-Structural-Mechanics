! 定义基本参数
et, 1, PLANE183           ! 选择单元类型PLANE183
keyopt, 1, 3, 2           ! 设置平面应变
mp, ex, 1, 2e8            ! 定义弹性模量为 2e8
mp, nuxy, 1, 0.3          ! 定义泊松比为 0.3

! 定义塑性行为
tb, plast, 1, 3           ! 定义塑性材料
tbdata, 1, 4e5, 0.01     ! 塑性应变0.01时应力为 4e5
tbdata, 2, 5e5, 0.01     ! 塑性应变0.01时应力为 5e5
tbdata, 3, 20.5e6, 10.01 ! 塑性应变10.01时应力为 20.5e6

! 创建几何模型
k, 1, 0, 0
k, 2, 50, 0
k, 3, 50, 50
k, 4, 0, 50
k, 5, 40, 45
k, 6, 0, 45
k, 7, 40, 5
k, 8, 0, 5

! 定义第一个三角形区域
l, 1, 2
l, 2, 3
l, 3, 4
l, 4, 1
l, 5, 6
l, 6, 4
l, 7, 8
l, 8, 4

! 镜像操作生成整个模型
nummrg, 1, 2, 3
nummrg, 4, 5, 6

! 设置网格划分
esize, 2                  ! 设置网格大小
type, 1                   ! 设置单元类型
real, 1                   ! 设置材料属性
mshkey, 1                 ! 设置网格类型为结构网格
amesh, all                ! 为所有区域划分网格

! 施加边界条件
d, all, uy, 0             ! 上下节点y方向固定
d, 1, ux, 0               ! 左侧节点x方向固定
d, 100, ux, 1             ! 右侧节点施加位移边界条件

! 施加位移边界条件
*do, i, 1, 100           ! 总计100个时间步
    dl, 1, ux, 0.01       ! 每步施加0.01的位移增量
    solve                  ! 求解
*enddo

! 结束求解
finish
